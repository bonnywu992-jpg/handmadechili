<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ‰‹å·¥è¾£æ¤’è¨‚è³¼</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Microsoft JhengHei', Arial, sans-serif; background: linear-gradient(135deg, #e64a19 0%, #ff6f00 100%); min-height: 100vh; padding: 20px; }
.container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
.header { background: linear-gradient(135deg, #d84315 0%, #e64a19 100%); color: white; padding: 40px 30px; text-align: center; }
.header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
.header p { font-size: 1.1em; opacity: 0.95; }
.line-link { display: inline-block; margin-top: 10px; padding: 8px 20px; background: rgba(255,255,255,0.2); border-radius: 20px; color: white; text-decoration: none; transition: background 0.3s; }
.line-link:hover { background: rgba(255,255,255,0.3); }
.product-section { padding: 40px 30px; }
.product-card { background: linear-gradient(135deg, #fff8f5 0%, #ffede7 100%); border-radius: 15px; padding: 30px; border: 3px solid #ff6f00; }
.product-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; margin-bottom: 20px; }
.product-name { font-size: 1.8em; color: #d84315; font-weight: bold; }
.product-price { font-size: 1.6em; color: #e64a19; font-weight: bold; }
.special-badge { display: inline-block; background: #ff8a50; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; margin-left: 10px; }
.highlight { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #ff6f00; }
.highlight strong { color: #d84315; }
.product-intro { background: linear-gradient(135deg, #fff8f0 0%, #ffe8e0 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #ff8a50; line-height: 1.8; }
.product-intro h3 { color: #d84315; margin-bottom: 15px; font-size: 1.3em; }
.product-intro p { color: #333; margin-bottom: 12px; font-size: 1.05em; }
.product-intro strong { color: #e64a19; }
.important-notice { background: #fff9e6; border: 2px solid #ffa726; border-radius: 10px; padding: 20px; margin: 20px 0; }
.important-notice h4 { color: #e65100; margin-bottom: 15px; font-size: 1.2em; text-align: center; }
.important-notice p { color: #d84315; font-weight: bold; margin: 10px 0; font-size: 1.05em; line-height: 1.8; }
.specs-box { background: #fff3e0; border-radius: 8px; padding: 15px; margin-top: 15px; border-left: 4px solid #ff8a50; }
.specs-box div { color: #333; margin-bottom: 8px; font-size: 1.05em; }
.specs-box div:last-child { margin-bottom: 0; }
.form-group { margin: 20px 0; }
.form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: bold; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; transition: border-color 0.3s; }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #ff6f00; }
.quantity-control { display: flex; align-items: center; gap: 15px; }
.quantity-control button { width: 40px; height: 40px; border: none; background: #ff6f00; color: white; font-size: 1.5em; border-radius: 8px; cursor: pointer; transition: background 0.3s; user-select: none; }
.quantity-control button:hover { background: #e64a19; }
.quantity-control button:active { transform: scale(0.95); }
.quantity-control input { width: 80px; text-align: center; font-size: 1.2em; font-weight: bold; }
.total-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; }
.total-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 1.1em; }
.total-row.final { font-size: 1.5em; font-weight: bold; color: #d84315; border-top: 2px solid #ddd; padding-top: 10px; margin-top: 15px; }
.notice { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; font-weight: bold; color: #d84315; border: 2px dashed #ffa726; }
.submit-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #d84315 0%, #e64a19 100%); color: white; border: none; border-radius: 12px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-bottom: 10px; }
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(216, 67, 21, 0.4); }
.submit-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.success-message { background: #d3f9d8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #2b8a3e; font-weight: bold; border: 2px solid #51cf66; }
.error-message { background: #ffe3e3; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #d84315; font-weight: bold; border: 2px solid #ff6f00; }
.store-section { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px; border: 2px solid #e9ecef; }
#addressGroup { display: none; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒ¶ï¸ æ‰‹å·¥è¾£æ¤’ ğŸŒ¶ï¸</h1>
    <p>ç´”æ‰‹å·¥è£½ä½œ â€¢ é¦™æ¿ƒè¾£å‘³è®“äººå›å‘³</p>
    <a href="https://line.me/R/ti/p/@628puagn" target="_blank" class="line-link">ğŸ“± å®˜æ–¹ LINEï¼š@628puagn</a>
  </div>

  <div class="product-section">
    <div class="product-card">
      
      <div class="product-header">
        <div>
          <span class="product-name">æ‰‹å·¥è¾£æ¤’</span>
          <span class="special-badge">ğŸ”¥ é¦™æ¿ƒè¾£å‘³</span>
        </div>
        <div class="product-price">NT$ 230 / ç½ (300g)</div>
      </div>

      <div class="highlight">
        <strong>ç´”æ‰‹å·¥è£½ä½œã€ä¸åŠ é˜²è…åŠ‘ï¼Œé¦™æ¿ƒè¾£å‘³è®“äººå›å‘³ âš ï¸</strong>
      </div>

      <div class="important-notice">
        <h4>âš ï¸ é‡è¦æé†’</h4>
        <div style="background: white; border-radius: 8px; padding: 15px; margin: 15px 0;">
          <p style="color: #e65100; display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 1.5em;">â°</span>
            <span>ç´”æ‰‹å·¥è£½ä½œï¼Œè£½ä½œå¤©æ•¸ç´„ <strong style="font-size: 1.1em;">7-10 å¤©</strong></span>
          </p>
        </div>
        <div style="background: white; border-radius: 8px; padding: 15px; margin: 15px 0;">
          <p style="color: #1976d2; display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 1.5em;">â„ï¸</span>
            <span>å…¨ç¨‹ <strong style="font-size: 1.1em;">å†·è—å‡ºè²¨</strong>ï¼Œç¢ºä¿æ–°é®®å“è³ª</span>
          </p>
        </div>
        <div style="background: white; border-radius: 8px; padding: 15px; margin: 15px 0;">
          <p style="color: #c62828; display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 1.5em;">ğŸ§Š</span>
            <span>æ”¶åˆ°å•†å“å¾Œè«‹å‹™å¿… <strong style="font-size: 1.1em;">å†·è—ä¿å­˜</strong></span>
          </p>
        </div>
        <div style="background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%); border-radius: 8px; padding: 15px; margin-top: 20px; border: 2px solid #ffa726;">
          <p style="color: #e65100; text-align: center; margin: 5px 0;">ğŸ“Œ åŒ¯æ¬¾å¾Œè«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿå‘ŠçŸ¥è¨‚è³¼å•†å“åŠæ ¸å°å¾Œäº”ç¢¼</p>
          <p style="color: #d84315; text-align: center; font-size: 1.1em; margin: 10px 0;"><strong>å®˜æ–¹ LINEï¼š@628puagn</strong></p>
          <p style="color: #e65100; text-align: center; margin: 5px 0;">ğŸ“Œ å•†å“å°‡æ–¼ç¢ºèªæ”¶åˆ°åŒ¯æ¬¾å¾Œé–‹å§‹è£½ä½œ</p>
        </div>
      </div>

      <div class="specs-box">
        <div><strong>ä»˜æ¬¾æ–¹å¼ï¼š</strong>ATM è½‰å¸³ã€éŠ€è¡ŒåŒ¯æ¬¾</div>
        <div><strong>å‡ºè²¨æ–¹å¼ï¼š</strong>éƒµå±€åŒ…è£¹ / è¶…å•†åº—åˆ°åº—ï¼ˆ7-11 æˆ– å…¨å®¶ï¼‰</div>
        <div><strong>é‹è²»ï¼š</strong>NT$ 130ï¼ˆè³¼è²· 10 ç½å«ä»¥ä¸Šå…é‹ï¼‰</div>
      </div>

      <form id="orderForm">
        <div class="form-group">
          <label>è³¼è²·æ•¸é‡</label>
          <div class="quantity-control">
            <button type="button" id="btnMinus">âˆ’</button>
            <input type="number" id="qty" value="1" min="1" readonly>
            <button type="button" id="btnPlus">+</button>
          </div>
        </div>

        <div class="notice" id="freeShipNotice">ğŸ‰ è³¼è²·10ç½(å«)ä»¥ä¸Šå…é‹è²»!</div>

        <div class="form-group"><label>å§“å *</label><input type="text" id="name" required></div>
        <div class="form-group"><label>é›»è©± *</label><input type="tel" id="phone" required placeholder="ä¾‹:0912345678"></div>
        <div class="form-group"><label>Email *</label><input type="email" id="email" required></div>
        
        <div class="form-group">
          <label>å–è²¨æ–¹å¼ *</label>
          <select id="pickup" required>
            <option value="">è«‹é¸æ“‡å–è²¨æ–¹å¼</option>
            <option value="7-11">7-11 è¶…å•†å–è²¨</option>
            <option value="å…¨å®¶">å…¨å®¶è¶…å•†å–è²¨</option>
            <option value="éƒµå±€åŒ…è£¹">éƒµå±€åŒ…è£¹</option>
          </select>
        </div>

        <div class="form-group" id="storeSelectGroup" style="display:none;">
          <label>é–€å¸‚è³‡è¨Š *</label>
          <div class="store-section">
            <div style="margin-bottom:15px;">
              <label style="display:block;margin-bottom:8px;color:#495057;font-size:0.95em;">è«‹å¡«å¯«å–è²¨é–€å¸‚è³‡è¨Š</label>
              <input type="text" id="storeCity" placeholder="ç¸£å¸‚ + å€åŸŸï¼ˆä¾‹ï¼šé«˜é›„å¸‚è‹“é›…å€ï¼‰" style="width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1em;margin-bottom:10px;">
              <input type="text" id="storeName" placeholder="é–€å¸‚åç¨±ï¼ˆä¾‹ï¼šæ­¦å»Ÿé–€å¸‚ï¼‰" style="width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1em;">
              <div style="margin-top:10px;padding:12px;background:#fff8f0;border-radius:6px;font-size:0.9em;color:#666;">
                ğŸ’¡ æç¤ºï¼šè«‹å¡«å¯«æ‚¨æ–¹ä¾¿å–è²¨çš„é–€å¸‚å®Œæ•´è³‡è¨Š
              </div>
            </div>
          </div>
        </div>

        <div class="form-group" id="addressGroup">
          <label id="addressLabel">æ”¶è²¨åœ°å€ *</label>
          <textarea id="address" rows="3" placeholder="è«‹å¡«å¯«å®Œæ•´åœ°å€"></textarea>
        </div>

        <div class="form-group">
          <label>åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼ *</label>
          <input type="text" id="accountLast5" maxlength="5" pattern="[0-9]{5}" required placeholder="è«‹å¡«å¯«5ä½æ•¸å­—">
        </div>
        <div class="form-group">
          <label>å‚™è¨»</label>
          <textarea id="note" rows="2" placeholder="å…¶ä»–éœ€æ±‚æˆ–å‚™è¨»"></textarea>
        </div>

        <div class="total-section">
          <div class="total-row"><span>å°è¨ˆ:</span><span id="subtotalDisplay">NT$ 230</span></div>
          <div class="total-row"><span>é‹è²»:</span><span id="shippingDisplay">NT$ 130</span></div>
          <div class="total-row final"><span>ç¸½è¨ˆ:</span><span id="totalDisplay">NT$ 360</span></div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">ç¢ºèªè¨‚è³¼</button>
        <div id="message"></div>
      </form>
    </div>
  </div>
</div>

<script>
(function() {
'use strict';

const CFG = {
  KEY: '63c8b2d8-bddb-46cb-b683-e3c0becf31bf',
  EMAIL: 'bonnywu992@gmail.com',
  PRICE: 230,
  SHIP: 130,
  FREE: 10
};

function generateOrderId() {
  const now = new Date();
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, '0');
  const day = String(now.getDate()).padStart(2, '0');
  const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
  return 'YW' + year + month + day + random;
}

const elements = {
  qty: document.getElementById('qty'),
  btnPlus: document.getElementById('btnPlus'),
  btnMinus: document.getElementById('btnMinus'),
  subtotal: document.getElementById('subtotalDisplay'),
  shipping: document.getElementById('shippingDisplay'),
  total: document.getElementById('totalDisplay'),
  notice: document.getElementById('freeShipNotice'),
  pickup: document.getElementById('pickup'),
  storeGroup: document.getElementById('storeSelectGroup'),
  addressGroup: document.getElementById('addressGroup'),
  form: document.getElementById('orderForm'),
  submitBtn: document.getElementById('submitBtn'),
  message: document.getElementById('message')
};

function updatePrice() {
  const quantity = parseInt(elements.qty.value) || 1;
  const subtotal = CFG.PRICE * quantity;
  const shipping = quantity >= CFG.FREE ? 0 : CFG.SHIP;
  const total = subtotal + shipping;
  
  elements.subtotal.textContent = 'NT$ ' + subtotal;
  elements.shipping.textContent = shipping === 0 ? 'å…é‹è²» âœ“' : 'NT$ ' + shipping;
  elements.total.textContent = 'NT$ ' + total;
  
  if (quantity < CFG.FREE) {
    elements.notice.textContent = 'å†è²· ' + (CFG.FREE - quantity) + ' ç½å³å¯å…é‹ ğŸ';
    elements.notice.style.background = '#fff3e0';
  } else {
    elements.notice.textContent = 'ğŸ‰ å·²é”å…é‹é–€æª»!æ­å–œçœä¸‹ NT$ ' + CFG.SHIP + ' é‹è²»!';
    elements.notice.style.background = '#d3f9d8';
  }
}

elements.pickup.addEventListener('change', function() {
  const method = this.value;
  const address = document.getElementById('address');
  const addressLabel = document.getElementById('addressLabel');
  
  if (method === '7-11' || method === 'å…¨å®¶') {
    elements.storeGroup.style.display = 'block';
    elements.addressGroup.style.display = 'none';
    address.value = '';
  } else if (method === 'éƒµå±€åŒ…è£¹') {
    elements.storeGroup.style.display = 'none';
    elements.addressGroup.style.display = 'block';
    addressLabel.textContent = 'æ”¶è²¨åœ°å€ *';
    address.placeholder = 'è«‹å¡«å¯«å®Œæ•´åœ°å€';
    address.value = '';
    address.readOnly = false;
    address.style.backgroundColor = '';
  } else {
    elements.storeGroup.style.display = 'none';
    elements.addressGroup.style.display = 'none';
  }
  updatePrice();
});

elements.btnPlus.addEventListener('click', function(e) {
  e.preventDefault();
  const currentQty = parseInt(elements.qty.value);
  elements.qty.value = currentQty + 1;
  updatePrice();
});

elements.btnMinus.addEventListener('click', function(e) {
  e.preventDefault();
  const currentQty = parseInt(elements.qty.value);
  if (currentQty > 1) {
    elements.qty.value = currentQty - 1;
    updatePrice();
  }
});

elements.form.addEventListener('submit', function(e) {
  e.preventDefault();
  
  const phone = document.getElementById('phone').value.trim();
  const account = document.getElementById('accountLast5').value.trim();
  const method = elements.pickup.value;
  const address = document.getElementById('address').value.trim();
  
  if (!/^09\d{8}$/.test(phone)) {
    elements.message.innerHTML = '<div class="error-message">âŒ è«‹è¼¸å…¥æ­£ç¢ºæ‰‹æ©Ÿè™Ÿç¢¼(ä¾‹:0912345678)</div>';
    return;
  }
  
  if (!/^\d{5}$/.test(account)) {
    elements.message.innerHTML = '<div class="error-message">âŒ å¸³è™Ÿå¾Œ5ç¢¼å¿…é ˆæ˜¯5ä½æ•¸å­—</div>';
    return;
  }
  
  let finalAddress = '';
  if (method === '7-11' || method === 'å…¨å®¶') {
    const storeCity = document.getElementById('storeCity').value.trim();
    const storeName = document.getElementById('storeName').value.trim();
    
    if (!storeCity || !storeName) {
      elements.message.innerHTML = '<div class="error-message">âŒ è«‹å¡«å¯«å®Œæ•´çš„é–€å¸‚è³‡è¨Š</div>';
      return;
    }
    finalAddress = method + '-' + storeCity + '-' + storeName;
  } else if (method === 'éƒµå±€åŒ…è£¹') {
    if (address.length < 5) {
      elements.message.innerHTML = '<div class="error-message">âŒ è«‹å¡«å¯«å®Œæ•´åœ°å€</div>';
      return;
    }
    finalAddress = address;
  } else {
    elements.message.innerHTML = '<div class="error-message">âŒ è«‹é¸æ“‡å–è²¨æ–¹å¼</div>';
    return;
  }
  
  elements.submitBtn.disabled = true;
  elements.submitBtn.textContent = 'è™•ç†ä¸­...';
  elements.message.innerHTML = '';
  
  const quantity = parseInt(elements.qty.value);
  const subtotal = CFG.PRICE * quantity;
  const shipping = quantity >= CFG.FREE ? 0 : CFG.SHIP;
  const total = subtotal + shipping;
  const orderId = generateOrderId();
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const note = document.getElementById('note').value || 'ç„¡';
  
  const formData1 = {
    access_key: CFG.KEY,
    subject: 'ğŸ›’ æ–°è¨‚å–® ' + orderId + ' - æ‰‹å·¥è¾£æ¤’',
    from_name: 'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',
    email: CFG.EMAIL,
    message: 'è¨‚å–®ç·¨è™Ÿ:' + orderId + '\nå§“å:' + name + '\né›»è©±:' + phone + '\nEmail:' + email + '\nå–è²¨æ–¹å¼:' + method + '\nåœ°å€/é–€å¸‚:' + finalAddress + '\nå¸³è™Ÿå¾Œ5ç¢¼:' + account + '\næ•¸é‡:' + quantity + 'ç½\nå°è¨ˆ:NT$ ' + subtotal + '\né‹è²»:NT$ ' + shipping + '\nç¸½è¨ˆ:NT$ ' + total + '\nå‚™è¨»:' + note
  };
  
  const formData2 = {
    access_key: CFG.KEY,
    from_name: 'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',
    email: email,
    message: 'è¦ªæ„›çš„ ' + name + ' æ‚¨å¥½,\n\næ„Ÿè¬æ‚¨çš„è¨‚è³¼!\n\nè¨‚å–®ç·¨è™Ÿ:' + orderId + '\nå•†å“:æ‰‹å·¥è¾£æ¤’ x ' + quantity + 'ç½ (300g/ç½)\nç¸½è¨ˆ:NT$ ' + total + '\nå–è²¨æ–¹å¼:' + method + '\nåœ°å€/é–€å¸‚:' + finalAddress + '\n\nè«‹è¨˜å¾—ç§è¨Šå®˜æ–¹ LINE å¸³è™Ÿ @628puagn å‘ŠçŸ¥è¨‚å–®ç·¨è™ŸåŠåŒ¯æ¬¾å¸³è™Ÿå¾Œäº”ç¢¼ã€‚\n\nå•†å“å°‡æ–¼ç¢ºèªæ”¶åˆ°åŒ¯æ¬¾å¾Œ 7-10 å¤©è£½ä½œå®Œæˆä¸¦ä»¥å†·è—æ–¹å¼å‡ºè²¨ã€‚\næ”¶åˆ°å•†å“å¾Œè«‹å‹™å¿…å†·è—ä¿å­˜ã€‚\n\nè¬è¬!'
  };
  
  fetch('https://api.web3forms.com/submit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(formData1)
  })
  .then(function(response) {
    return fetch('https://api.web3forms.com/submit', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData2)
    });
  })
  .then(function(response) {
    elements.message.innerHTML = '<div class="success-message">âœ… è¨‚å–®å·²æˆåŠŸé€å‡º!<br><strong>è¨‚å–®ç·¨è™Ÿ:' + orderId + '</strong><br><br>è«‹è¨˜å¾—ç§è¨Šå®˜æ–¹ LINE å¸³è™Ÿ @628puagn<br>å‘ŠçŸ¥è¨‚å–®ç·¨è™ŸåŠåŒ¯æ¬¾å¸³è™Ÿå¾Œäº”ç¢¼ã€‚<br><br>å•†å“å°‡æ–¼ç¢ºèªæ”¶åˆ°åŒ¯æ¬¾å¾Œ 7-10 å¤©è£½ä½œå®Œæˆã€‚</div>';
    elements.form.reset();
    elements.qty.value = 1;
    elements.storeGroup.style.display = 'none';
    elements.addressGroup.style.display = 'none';
    updatePrice();
  })
  .catch(function(error) {
    console.error(error);
    elements.message.innerHTML = '<div class="error-message">âŒ è¨‚å–®é€å‡ºå¤±æ•—,è«‹ç¨å¾Œå†è©¦</div>';
  })
  .finally(function() {
    elements.submitBtn.disabled = false;
    elements.submitBtn.textContent = 'ç¢ºèªè¨‚è³¼';
  });
});

updatePrice();

})();
</script>
</body>
</html>
