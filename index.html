<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ‰‹å·¥è¾£æ¤’ - ç´”æ‰‹å·¥è£½ä½œ</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Microsoft JhengHei', Arial, sans-serif; background: linear-gradient(135deg, #c62828 0%, #e53935 100%); min-height: 100vh; padding: 20px; }
.container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
.header { background: linear-gradient(135deg, #b71c1c 0%, #c62828 100%); color: white; padding: 40px 30px; text-align: center; }
.header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
.header p { font-size: 1.1em; opacity: 0.95; }
.ig-link { display: inline-block; margin-top: 10px; padding: 8px 20px; background: rgba(255,255,255,0.2); border-radius: 20px; color: white; text-decoration: none; transition: background 0.3s; }
.ig-link:hover { background: rgba(255,255,255,0.3); }
.product-section { padding: 40px 30px; }
.product-card { background: linear-gradient(135deg, #fff8f8 0%, #ffebee 100%); border-radius: 15px; padding: 30px; border: 3px solid #e53935; }
.product-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; margin-bottom: 20px; }
.product-name { font-size: 1.8em; color: #b71c1c; font-weight: bold; }
.product-price { font-size: 1.6em; color: #c62828; font-weight: bold; }
.special-badge { display: inline-block; background: #ff5252; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; margin-left: 10px; }
.highlight { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #ff6f00; line-height: 1.8; }
.highlight strong { color: #e65100; }
.info-box { background: #e8f5e9; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #43a047; line-height: 1.8; }
.info-box strong { color: #2e7d32; display: block; margin-bottom: 8px; font-size: 1.1em; }
.warning-box { background: #fff9c4; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #fbc02d; line-height: 1.8; }
.warning-box strong { color: #f57f17; display: block; margin-bottom: 8px; font-size: 1.1em; }
.form-group { margin: 20px 0; }
.form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: bold; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; transition: border-color 0.3s; }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #e53935; }
.quantity-control { display: flex; align-items: center; gap: 15px; }
.quantity-control button { width: 40px; height: 40px; border: none; background: #e53935; color: white; font-size: 1.5em; border-radius: 8px; cursor: pointer; transition: background 0.3s; user-select: none; }
.quantity-control button:hover { background: #c62828; }
.quantity-control button:active { transform: scale(0.95); }
.quantity-control input { width: 80px; text-align: center; font-size: 1.2em; font-weight: bold; pointer-events: none; }
.total-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; }
.total-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 1.1em; }
.total-row.final { font-size: 1.5em; font-weight: bold; color: #b71c1c; border-top: 2px solid #ddd; padding-top: 10px; margin-top: 15px; }
.notice { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; font-weight: bold; color: #e65100; border: 2px dashed #ff9800; }
.submit-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #b71c1c 0%, #c62828 100%); color: white; border: none; border-radius: 12px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-bottom: 10px; }
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(183, 28, 28, 0.4); }
.submit-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.success-message { background: #d3f9d8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #2b8a3e; font-weight: bold; border: 2px solid #51cf66; line-height: 1.8; }
.error-message { background: #ffe3e3; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #b71c1c; font-weight: bold; border: 2px solid #e53935; }
.store-section { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px; border: 2px solid #e9ecef; }
.store-region { margin-bottom: 15px; }
.store-region:last-child { margin-bottom: 0; }
.store-region label { font-size: 0.95em; color: #495057; margin-bottom: 5px; display: block; }
#addressGroup { display: none; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒ¶ï¸ æ‰‹å·¥è¾£æ¤’ ğŸŒ¶ï¸</h1>
    <p>ç´”æ‰‹å·¥è£½ä½œ Â· ä¸åŠ é˜²è…åŠ‘</p>
    <a href="https://line.me/ti/p/@628puagn" target="_blank" class="ig-link">ğŸ“± å®˜æ–¹å¸³è™Ÿï¼š@628puagn</a>
  </div>

  <div class="product-section">
    <div class="product-card">
      <div class="product-header">
        <div>
          <span class="product-name">æ‰‹å·¥è¾£æ¤’</span>
          <span class="special-badge">ğŸ”¥ é¦™æ¿ƒè¾£å‘³</span>
        </div>
        <div class="product-price">NT$ 230 / ç½</div>
      </div>

      <div class="highlight">
        <strong>â€¢ ç´”æ‰‹å·¥è£½ä½œã€ä¸åŠ é˜²è…åŠ‘ï¼Œé¦™æ¿ƒè¾£å‘³è®“äººå›å‘³</strong><br><br>
        <strong>âš ï¸ é‡è¦æé†’</strong><br>
        ğŸ• å› æ˜¯ç´”æ‰‹å·¥è£½ä½œï¼Œè£½ä½œå¤©æ•¸ç´„ 7-10 å¤©<br>
        â„ï¸ å› æ˜¯ç´”æ‰‹å·¥è£½ä½œï¼Œçš†ä»¥å†·è—å‡ºè²¨<br>
        ğŸ§Š å› æ˜¯ç´”æ‰‹å·¥è£½ä½œï¼Œè«‹æ–¼æ”¶åˆ°è¾£æ¤’ä¹‹å¾Œä»¥å†·è—ä¿å­˜
      </div>

      <form id="orderForm">
        <div class="form-group">
          <label>è³¼è²·æ•¸é‡</label>
          <div class="quantity-control">
            <button type="button" id="btnMinus">âˆ’</button>
            <input type="number" id="qty" value="1" min="1" readonly>
            <button type="button" id="btnPlus">+</button>
          </div>
        </div>

        <div class="notice" id="freeShipNotice">ğŸ‰ è³¼è²·10ç½(å«)ä»¥ä¸Šå…é‹è²»!</div>

        <div class="form-group"><label>å§“å *</label><input type="text" id="name" required></div>
        <div class="form-group"><label>é›»è©± *</label><input type="tel" id="phone" required placeholder="ä¾‹:0912345678"></div>
        <div class="form-group"><label>Email *</label><input type="email" id="email" required></div>
        
        <div class="form-group">
          <label>å–è²¨æ–¹å¼ *</label>
          <select id="pickup" required>
            <option value="">è«‹é¸æ“‡å–è²¨æ–¹å¼</option>
            <option value="7-11">7-11 è¶…å•†å–è²¨</option>
            <option value="å…¨å®¶">å…¨å®¶è¶…å•†å–è²¨</option>
            <option value="å®…é…">å®…é…</option>
          </select>
        </div>

        <div class="info-box" id="paymentNotice" style="display:none;">
          <strong>ğŸ’³ åŒ¯æ¬¾æé†’</strong>
          åŒ¯æ¬¾å¾Œè«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿå‘ŠçŸ¥è¨‚è³¼å•†å“åŠæ ¸å°å¾Œäº”ç¢¼<br>
          å®˜æ–¹å¸³è™Ÿï¼š<strong>@628puagn</strong>
        </div>

        <div class="form-group" id="storeSelectGroup" style="display:none;">
          <label>é¸æ“‡é–€å¸‚ *</label>
          <div class="store-section" id="storeSection"></div>
        </div>

        <div class="form-group" id="addressGroup">
          <label id="addressLabel">æ”¶è²¨åœ°å€ *</label>
          <textarea id="address" rows="3" placeholder="è«‹å¡«å¯«å®Œæ•´åœ°å€"></textarea>
        </div>

        <div class="form-group">
          <label>åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼ *</label>
          <input type="text" id="accountLast5" maxlength="5" pattern="[0-9]{5}" required placeholder="è«‹å¡«å¯«5ä½æ•¸å­—">
        </div>
        <div class="form-group">
          <label>å‚™è¨»</label>
          <textarea id="note" rows="2" placeholder="å…¶ä»–éœ€æ±‚æˆ–å‚™è¨»"></textarea>
        </div>

        <div class="total-section">
          <div class="total-row"><span>å°è¨ˆ:</span><span id="subtotalDisplay">NT$ 230</span></div>
          <div class="total-row"><span>é‹è²»:</span><span id="shippingDisplay">NT$ 130</span></div>
          <div class="total-row final"><span>ç¸½è¨ˆ:</span><span id="totalDisplay">NT$ 360</span></div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">ç¢ºèªè¨‚è³¼</button>
        <div id="message"></div>
      </form>
    </div>
  </div>
</div>

<script>
const WEB3FORMS_ACCESS_KEY='63c8b2d8-bddb-46cb-b683-e3c0becf31bf';
const MERCHANT_EMAIL='bonnywu992@gmail.com';
const PRICE=230, SHIPPING_DELIVERY=160, SHIPPING_STORE=130, FREE_SHIPPING_QTY=10;

// å®Œæ•´çš„é–€å¸‚è³‡æ–™
const storeData = {
  '7-11': {
    'å°åŒ—å¸‚': {'ä¸­æ­£å€':['ä¸­æ­£é–€å¸‚'],'å¤§åŒå€':['å¤§åŒé–€å¸‚'],'ä¸­å±±å€':['ä¸­å±±é–€å¸‚'],'æ¾å±±å€':['æ¾å±±é–€å¸‚'],'å¤§å®‰å€':['å¤§å®‰é–€å¸‚'],'è¬è¯å€':['è¬è¯é–€å¸‚'],'ä¿¡ç¾©å€':['ä¿¡ç¾©é–€å¸‚'],'å£«æ—å€':['å£«æ—é–€å¸‚'],'åŒ—æŠ•å€':['åŒ—æŠ•é–€å¸‚'],'å…§æ¹–å€':['å…§æ¹–é–€å¸‚'],'å—æ¸¯å€':['å—æ¸¯é–€å¸‚'],'æ–‡å±±å€':['æ–‡å±±é–€å¸‚']},
    'æ–°åŒ—å¸‚': {'æ¿æ©‹å€':['æ¿æ©‹é–€å¸‚'],'ä¸‰é‡å€':['ä¸‰é‡é–€å¸‚'],'ä¸­å’Œå€':['ä¸­å’Œé–€å¸‚'],'æ°¸å’Œå€':['æ°¸å’Œé–€å¸‚'],'æ–°èŠå€':['æ–°èŠé–€å¸‚'],'æ–°åº—å€':['æ–°åº—é–€å¸‚'],'æ¨¹æ—å€':['æ¨¹æ—é–€å¸‚'],'é¶¯æ­Œå€':['é¶¯æ­Œé–€å¸‚'],'ä¸‰å³½å€':['ä¸‰å³½é–€å¸‚'],'æ·¡æ°´å€':['æ·¡æ°´é–€å¸‚'],'æ±æ­¢å€':['æ±æ­¢é–€å¸‚'],'ç‘èŠ³å€':['ç‘èŠ³é–€å¸‚'],'åœŸåŸå€':['åœŸåŸé–€å¸‚'],'è˜†æ´²å€':['è˜†æ´²é–€å¸‚'],'äº”è‚¡å€':['äº”è‚¡é–€å¸‚'],'æ³°å±±å€':['æ³°å±±é–€å¸‚'],'æ—å£å€':['æ—å£é–€å¸‚']},
    'æ¡ƒåœ’å¸‚': {'æ¡ƒåœ’å€':['æ¡ƒåœ’é–€å¸‚'],'ä¸­å£¢å€':['ä¸­å£¢é–€å¸‚'],'å¹³é®å€':['å¹³é®é–€å¸‚'],'å…«å¾·å€':['å…«å¾·é–€å¸‚'],'æ¥Šæ¢…å€':['æ¥Šæ¢…é–€å¸‚'],'è˜†ç«¹å€':['è˜†ç«¹é–€å¸‚'],'å¤§æºªå€':['å¤§æºªé–€å¸‚'],'é¾æ½­å€':['é¾æ½­é–€å¸‚'],'é¾œå±±å€':['é¾œå±±é–€å¸‚']},
    'å°ä¸­å¸‚': {'ä¸­å€':['ä¸­å€é–€å¸‚'],'æ±å€':['æ±å€é–€å¸‚'],'å—å€':['å—å€é–€å¸‚'],'è¥¿å€':['è¥¿å€é–€å¸‚'],'åŒ—å€':['åŒ—å€é–€å¸‚'],'è¥¿å±¯å€':['è¥¿å±¯é–€å¸‚'],'å—å±¯å€':['å—å±¯é–€å¸‚'],'åŒ—å±¯å€':['åŒ—å±¯é–€å¸‚'],'è±åŸå€':['è±åŸé–€å¸‚'],'å¤§é‡Œå€':['å¤§é‡Œé–€å¸‚'],'å¤ªå¹³å€':['å¤ªå¹³é–€å¸‚']},
    'å°å—å¸‚': {'ä¸­è¥¿å€':['ä¸­è¥¿é–€å¸‚'],'æ±å€':['æ±å€é–€å¸‚'],'å—å€':['å—å€é–€å¸‚'],'åŒ—å€':['åŒ—å€é–€å¸‚'],'å®‰å¹³å€':['å®‰å¹³é–€å¸‚'],'å®‰å—å€':['å®‰å—é–€å¸‚'],'æ°¸åº·å€':['æ°¸åº·é–€å¸‚'],'æ­¸ä»å€':['æ­¸ä»é–€å¸‚'],'æ–°åŒ–å€':['æ–°åŒ–é–€å¸‚']},
    'é«˜é›„å¸‚': {'æ–°èˆˆå€':['æ–°èˆˆé–€å¸‚'],'å‰é‡‘å€':['å‰é‡‘é–€å¸‚'],'è‹“é›…å€':['è‹“é›…é–€å¸‚'],'é¹½åŸ•å€':['é¹½åŸ•é–€å¸‚'],'é¼“å±±å€':['é¼“å±±é–€å¸‚'],'æ——æ´¥å€':['æ——æ´¥é–€å¸‚'],'å‰é®å€':['å‰é®é–€å¸‚'],'ä¸‰æ°‘å€':['ä¸‰æ°‘é–€å¸‚'],'å·¦ç‡Ÿå€':['å·¦ç‡Ÿé–€å¸‚'],'æ¥ æ¢“å€':['æ¥ æ¢“é–€å¸‚'],'å°æ¸¯å€':['å°æ¸¯é–€å¸‚'],'é³³å±±å€':['é³³å±±é–€å¸‚']}
  },
  'å…¨å®¶': {
    'å°åŒ—å¸‚': {'ä¸­æ­£å€':['ä¸­æ­£åº—'],'å¤§åŒå€':['å¤§åŒåº—'],'ä¸­å±±å€':['ä¸­å±±åº—'],'æ¾å±±å€':['æ¾å±±åº—'],'å¤§å®‰å€':['å¤§å®‰åº—'],'è¬è¯å€':['è¬è¯åº—'],'ä¿¡ç¾©å€':['ä¿¡ç¾©åº—'],'å£«æ—å€':['å£«æ—åº—'],'åŒ—æŠ•å€':['åŒ—æŠ•åº—'],'å…§æ¹–å€':['å…§æ¹–åº—'],'å—æ¸¯å€':['å—æ¸¯åº—'],'æ–‡å±±å€':['æ–‡å±±åº—']},
    'æ–°åŒ—å¸‚': {'æ¿æ©‹å€':['æ¿æ©‹åº—'],'ä¸‰é‡å€':['ä¸‰é‡åº—'],'ä¸­å’Œå€':['ä¸­å’Œåº—'],'æ°¸å’Œå€':['æ°¸å’Œåº—'],'æ–°èŠå€':['æ–°èŠåº—'],'æ–°åº—å€':['æ–°åº—åº—'],'æ¨¹æ—å€':['æ¨¹æ—åº—'],'é¶¯æ­Œå€':['é¶¯æ­Œåº—'],'ä¸‰å³½å€':['ä¸‰å³½åº—'],'æ·¡æ°´å€':['æ·¡æ°´åº—'],'æ±æ­¢å€':['æ±æ­¢åº—'],'ç‘èŠ³å€':['ç‘èŠ³åº—'],'åœŸåŸå€':['åœŸåŸåº—'],'è˜†æ´²å€':['è˜†æ´²åº—'],'äº”è‚¡å€':['äº”è‚¡åº—'],'æ³°å±±å€':['æ³°å±±åº—'],'æ—å£å€':['æ—å£åº—']},
    'æ¡ƒåœ’å¸‚': {'æ¡ƒåœ’å€':['æ¡ƒåœ’åº—'],'ä¸­å£¢å€':['ä¸­å£¢åº—'],'å¹³é®å€':['å¹³é®åº—'],'å…«å¾·å€':['å…«å¾·åº—'],'æ¥Šæ¢…å€':['æ¥Šæ¢…åº—'],'è˜†ç«¹å€':['è˜†ç«¹åº—'],'å¤§æºªå€':['å¤§æºªåº—'],'é¾æ½­å€':['é¾æ½­åº—'],'é¾œå±±å€':['é¾œå±±åº—']},
    'å°ä¸­å¸‚': {'ä¸­å€':['ä¸­å€åº—'],'æ±å€':['æ±å€åº—'],'å—å€':['å—å€åº—'],'è¥¿å€':['è¥¿å€åº—'],'åŒ—å€':['åŒ—å€åº—'],'è¥¿å±¯å€':['è¥¿å±¯åº—'],'å—å±¯å€':['å—å±¯åº—'],'åŒ—å±¯å€':['åŒ—å±¯åº—'],'è±åŸå€':['è±åŸåº—'],'å¤§é‡Œå€':['å¤§é‡Œåº—'],'å¤ªå¹³å€':['å¤ªå¹³åº—']},
    'å°å—å¸‚': {'ä¸­è¥¿å€':['ä¸­è¥¿åº—'],'æ±å€':['æ±å€åº—'],'å—å€':['å—å€åº—'],'åŒ—å€':['åŒ—å€åº—'],'å®‰å¹³å€':['å®‰å¹³åº—'],'å®‰å—å€':['å®‰å—åº—'],'æ°¸åº·å€':['æ°¸åº·åº—'],'æ­¸ä»å€':['æ­¸ä»åº—'],'æ–°åŒ–å€':['æ–°åŒ–åº—']},
    'é«˜é›„å¸‚': {'æ–°èˆˆå€':['æ–°èˆˆåº—'],'å‰é‡‘å€':['å‰é‡‘åº—'],'è‹“é›…å€':['è‹“é›…åº—'],'é¹½åŸ•å€':['é¹½åŸ•åº—'],'é¼“å±±å€':['é¼“å±±åº—'],'æ——æ´¥å€':['æ——æ´¥åº—'],'å‰é®å€':['å‰é®åº—'],'ä¸‰æ°‘å€':['ä¸‰æ°‘åº—'],'å·¦ç‡Ÿå€':['å·¦ç‡Ÿåº—'],'æ¥ æ¢“å€':['æ¥ æ¢“åº—'],'å°æ¸¯å€':['å°æ¸¯åº—'],'é³³å±±å€':['é³³å±±åº—']}
  }
};

const qtyInput=document.getElementById('qty'),btnPlus=document.getElementById('btnPlus'),btnMinus=document.getElementById('btnMinus'),subtotalDisplay=document.getElementById('subtotalDisplay'),shippingDisplay=document.getElementById('shippingDisplay'),totalDisplay=document.getElementById('totalDisplay'),freeShipNotice=document.getElementById('freeShipNotice'),pickupSelect=document.getElementById('pickup'),storeSelectGroup=document.getElementById('storeSelectGroup'),addressGroup=document.getElementById('addressGroup'),storeSection=document.getElementById('storeSection');
let selectedStore='',citySelect,districtSelect,storeSelect;

function generateOrderId(){const now=new Date();return'HC'+now.getFullYear()+String(now.getMonth()+1).padStart(2,'0')+String(now.getDate()).padStart(2,'0')+Math.floor(Math.random()*10000).toString().padStart(4,'0');}

function updatePrice(){let qty=parseInt(qtyInput.value);if(isNaN(qty)||qty<1){qty=1;qtyInput.value=1;}const subtotal=PRICE*qty,pickupMethod=pickupSelect.value;let shipping=0;if(pickupMethod==='å®…é…')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_DELIVERY;else if(pickupMethod==='7-11'||pickupMethod==='å…¨å®¶')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_STORE;else shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_STORE;const total=subtotal+shipping;subtotalDisplay.textContent='NT$ '+subtotal;shippingDisplay.textContent=(shipping===0)?'å…é‹è²» âœ“':'NT$ '+shipping;totalDisplay.textContent='NT$ '+total;if(qty<FREE_SHIPPING_QTY){const left=FREE_SHIPPING_QTY-qty;freeShipNotice.textContent='å†è²· '+left+' ç½å³å¯å…é‹ ğŸ';freeShipNotice.style.background='#fff3e0';}else{const savedAmount=(pickupMethod==='å®…é…')?SHIPPING_DELIVERY:SHIPPING_STORE;freeShipNotice.textContent='ğŸ‰ å·²é”å…é‹é–€æª»!æ­å–œçœä¸‹ NT$ '+savedAmount+' é‹è²»!';freeShipNotice.style.background='#d3f9d8';}}

function renderStoreOptions(pickupMethod){storeSection.innerHTML='';selectedStore='';if(!storeData[pickupMethod])return;const stores=storeData[pickupMethod];const cityDiv=document.createElement('div');cityDiv.className='store-region';const cityLabel=document.createElement('label');cityLabel.textContent='é¸æ“‡åŸå¸‚';cityDiv.appendChild(cityLabel);citySelect=document.createElement('select');citySelect.style.width='100%';citySelect.style.padding='12px';citySelect.style.border='2px solid #ddd';citySelect.style.borderRadius='8px';citySelect.style.fontSize='1em';const cityDefault=document.createElement('option');cityDefault.value='';cityDefault.textContent='è«‹é¸æ“‡åŸå¸‚';citySelect.appendChild(cityDefault);Object.keys(stores).forEach(city=>{const option=document.createElement('option');option.value=city;option.textContent=city;citySelect.appendChild(option);});cityDiv.appendChild(citySelect);storeSection.appendChild(cityDiv);const districtDiv=document.createElement('div');districtDiv.className='store-region';const districtLabel=document.createElement('label');districtLabel.textContent='é¸æ“‡å€åŸŸ';districtDiv.appendChild(districtLabel);districtSelect=document.createElement('select');districtSelect.style.width='100%';districtSelect.style.padding='12px';districtSelect.style.border='2px solid #ddd';districtSelect.style.borderRadius='8px';districtSelect.style.fontSize='1em';districtSelect.disabled=true;const districtDefault=document.createElement('option');districtDefault.value='';districtDefault.textContent='è«‹å…ˆé¸æ“‡åŸå¸‚';districtSelect.appendChild(districtDefault);districtDiv.appendChild(districtSelect);storeSection.appendChild(districtDiv);const storeDiv=document.createElement('div');storeDiv.className='store-region';const storeLabel=document.createElement('label');storeLabel.textContent='é¸æ“‡é–€å¸‚';storeDiv.appendChild(storeLabel);storeSelect=document.createElement('select');storeSelect.style.width='100%';storeSelect.style.padding='12px';storeSelect.style.border='2px solid #ddd';storeSelect.style.borderRadius='8px';storeSelect.style.fontSize='1em';storeSelect.disabled=true;const storeDefault=document.createElement('option');storeDefault.value='';storeDefault.textContent='è«‹å…ˆé¸æ“‡å€åŸŸ';storeSelect.appendChild(storeDefault);storeDiv.appendChild(storeSelect);storeSection.appendChild(storeDiv);citySelect.addEventListener('change',function(){const selectedCity=this.value;districtSelect.innerHTML='';storeSelect.innerHTML='';storeSelect.disabled=true;selectedStore='';const dd=document.createElement('option');dd.value='';dd.textContent='è«‹é¸æ“‡å€åŸŸ';districtSelect.appendChild(dd);const sd=document.createElement('option');sd.value='';sd.textContent='è«‹å…ˆé¸æ“‡å€åŸŸ';storeSelect.appendChild(sd);if(selectedCity&&stores[selectedCity]){districtSelect.disabled=false;Object.keys(stores[selectedCity]).forEach(district=>{const option=document.createElement('option');option.value=district;option.textContent=district;districtSelect.appendChild(option);});}else{districtSelect.disabled=true;}});districtSelect.addEventListener('change',function(){const selectedCity=citySelect.value,selectedDistrict=this.value;storeSelect.innerHTML='';selectedStore='';const sd=document.createElement('option');sd.value='';sd.textContent='è«‹é¸æ“‡é–€å¸‚';storeSelect.appendChild(sd);if(selectedCity&&selectedDistrict&&stores[selectedCity][selectedDistrict]){storeSelect.disabled=false;stores[selectedCity][selectedDistrict].forEach(store=>{const option=document.createElement('option');option.value=selectedCity+'-'+selectedDistrict+'-'+store;option.textContent=store;storeSelect.appendChild(option);});}else{storeSelect.disabled=true;}});storeSelect.addEventListener('change',function(){selectedStore=this.value;});}

pickupSelect.addEventListener('change',function(){const method=this.value;const paymentNotice=document.getElementById('paymentNotice');if(method==='7-11'||method==='å…¨å®¶'){storeSelectGroup.style.display='block';addressGroup.style.display='none';paymentNotice.style.display='block';renderStoreOptions(method);}else if(method==='å®…é…'){storeSelectGroup.style.display='none';addressGroup.style.display='block';paymentNotice.style.display='block';document.getElementById('addressLabel').textContent='æ”¶è²¨åœ°å€ *';document.getElementById('address').placeholder='è«‹å¡«å¯«å®Œæ•´åœ°å€';}else{storeSelectGroup.style.display='none';addressGroup.style.display='none';paymentNotice.style.display='none';}updatePrice();});

btnPlus.addEventListener('click',function(e){e.preventDefault();qtyInput.value=parseInt(qtyInput.value)+1;updatePrice();});
btnMinus.addEventListener('click',function(e){e.preventDefault();if(parseInt(qtyInput.value)>1){qtyInput.value=parseInt(qtyInput.value)-1;updatePrice();}});

document.getElementById('orderForm').addEventListener('submit',async function(e){e.preventDefault();const submitBtn=document.getElementById('submitBtn'),messageDiv=document.getElementById('message'),phone=document.getElementById('phone').value.trim(),account=document.getElementById('accountLast5').value.trim(),pickupMethod=document.getElementById('pickup').value,addressInput=document.getElementById('address').value.trim();if(!/^09\d{8}$/.test(phone)){messageDiv.innerHTML='<div class="error-message">âŒ è«‹è¼¸å…¥æ­£ç¢ºæ‰‹æ©Ÿè™Ÿç¢¼(ä¾‹:0912345678)</div>';return;}if(!/^\d{5}$/.test(account)){messageDiv.innerHTML='<div class="error-message">âŒ å¸³è™Ÿå¾Œ5ç¢¼å¿…é ˆæ˜¯5ä½æ•¸å­—</div>';return;}let finalAddress='';if(pickupMethod==='7-11'||pickupMethod==='å…¨å®¶'){if(!selectedStore){messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡é–€å¸‚</div>';return;}finalAddress=selectedStore;}else if(pickupMethod==='å®…é…'){if(addressInput.length<5){messageDiv.innerHTML='<div class="error-message">âŒ è«‹å¡«å¯«å®Œæ•´åœ°å€</div>';return;}finalAddress=addressInput;}else{messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡å–è²¨æ–¹å¼</div>';return;}submitBtn.disabled=true;submitBtn.textContent='è™•ç†ä¸­...';messageDiv.innerHTML='';try{const qty=parseInt(qtyInput.value),subtotal=PRICE*qty;let shipping=0;if(pickupMethod==='å®…é…')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_DELIVERY;else if(pickupMethod==='7-11'||pickupMethod==='å…¨å®¶')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_STORE;const total=subtotal+shipping,orderId=generateOrderId(),orderTime=new Date().toLocaleString('zh-TW',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',hour12:false}),customerName=document.getElementById('name').value,customerEmail=document.getElementById('email').value,note=document.getElementById('note').value||'ç„¡';const merchantEmailContent=`â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
ğŸ›’ æ–°è¨‚å–®é€šçŸ¥ - æ‰‹å·¥è¾£æ¤’
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è¨‚å–®ç·¨è™Ÿ: ${orderId}
è¨‚å–®æ™‚é–“: ${orderTime}
å§“å: ${customerName}
é›»è©±: ${phone}
Email: ${customerEmail}
å–è²¨æ–¹å¼: ${pickupMethod}
æ”¶è²¨åœ°å€/é–€å¸‚: ${finalAddress}
åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼: ${account}
å•†å“: æ‰‹å·¥è¾£æ¤’ 300g
å–®åƒ¹: NT$ ${PRICE}
æ•¸é‡: ${qty} ç½
å°è¨ˆ: NT$ ${subtotal}
é‹è²»: ${shipping===0?'å…é‹è²» âœ“':'NT$ '+shipping}
ç¸½é¡: NT$ ${total}
å‚™è¨»: ${note}
âš ï¸ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©
âš ï¸ å†·è—å‡ºè²¨`;await fetch('https://api.web3forms.com/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,subject:`ğŸ›’ æ–°è¨‚å–® ${orderId} - æ‰‹å·¥è¾£æ¤’`,from_name:'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',email:MERCHANT_EMAIL,message:merchantEmailContent})});const customerEmailContent=`è¦ªæ„›çš„ ${customerName} æ‚¨å¥½:

æ„Ÿè¬æ‚¨è¨‚è³¼æ‰‹å·¥è¾£æ¤’ï¼

è¨‚å–®ç·¨è™Ÿ: ${orderId}
å•†å“: æ‰‹å·¥è¾£æ¤’ (300g) x ${qty} ç½
å°è¨ˆ: NT$ ${subtotal}
é‹è²»: ${shipping===0?'å…é‹è²» âœ“':'NT$ '+shipping}
ç¸½è¨ˆ: NT$ ${total}
å–è²¨æ–¹å¼: ${pickupMethod}
åœ°å€/é–€å¸‚: ${finalAddress}

âš ï¸ é‡è¦æé†’
â€¢ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©
â€¢ å†·è—å‡ºè²¨ï¼Œæ”¶åˆ°å¾Œè«‹å†·è—ä¿å­˜
ğŸ“Œ è«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿæ ¸å°å¾Œäº”ç¢¼
å®˜æ–¹å¸³è™Ÿ: @628puagn`;await fetch('https://api.web3forms.com/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,from_name:'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',email:customerEmail,message:customerEmailContent})});messageDiv.innerHTML=`<div class="success-message">âœ… è¨‚å–®å·²æˆåŠŸé€å‡º!<br><br><strong>è¨‚å–®ç·¨è™Ÿ: ${orderId}</strong><br><br>ğŸ“Œ è«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿæ ¸å°å¾Œäº”ç¢¼<br>å®˜æ–¹å¸³è™Ÿ: <strong>@628puagn</strong><br><br>âš ï¸ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©<br>ğŸ“§ ç¢ºèªä¿¡å·²ç™¼é€è‡³æ‚¨çš„ Email</div>`;document.getElementById('orderForm').reset();qtyInput.value=1;selectedStore='';storeSelectGroup.style.display='none';addressGroup.style.display='none';updatePrice();}catch(err){messageDiv.innerHTML='<div class="error-message">âŒ è¨‚å–®é€å‡ºå¤±æ•—<br><br>è«‹é€éå®˜æ–¹å¸³è™Ÿè¯ç¹«ï¼š<strong>@628puagn</strong></div>';}finally{submitBtn.disabled=false;submitBtn.textContent='ç¢ºèªè¨‚è³¼';}});

updatePrice();
</script>
</body>
</html>å­—</div>';return;}let finalAddress='';if(pickupMethod==='7-11'||pickupMethod==='å…¨å®¶'){if(!selectedStore){messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡é–€å¸‚</div>';return;}finalAddress=selectedStore;}else if(pickupMethod==='å®…é…'){if(addressInput.length<5){messageDiv.innerHTML='<div class="error-message">âŒ è«‹å¡«å¯«å®Œæ•´åœ°å€</div>';return;}finalAddress=addressInput;}else{messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡å–è²¨æ–¹å¼</div>';return;}submitBtn.disabled=true;submitBtn.textContent='è™•ç†ä¸­...';messageDiv.innerHTML='';try{const qty=parseInt(qtyInput.value),subtotal=PRICE*qty;let shipping=0;if(pickupMethod==='å®…é…')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_DELIVERY;else if(pickupMethod==='7-11'||pickupMethod==='å…¨å®¶')shipping=(qty>=FREE_SHIPPING_QTY)?0:SHIPPING_STORE;const total=subtotal+shipping,orderId=generateOrderId(),orderTime=new Date().toLocaleString('zh-TW',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',hour12:false}),customerName=document.getElementById('name').value,customerEmail=document.getElementById('email').value,note=document.getElementById('note').value||'ç„¡';const merchantEmailContent=`â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
ğŸ›’ æ–°è¨‚å–®é€šçŸ¥ - æ‰‹å·¥è¾£æ¤’
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è¨‚å–®ç·¨è™Ÿ: ${orderId}
è¨‚å–®æ™‚é–“: ${orderTime}
å§“å: ${customerName}
é›»è©±: ${phone}
Email: ${customerEmail}
å–è²¨æ–¹å¼: ${pickupMethod}
æ”¶è²¨åœ°å€/é–€å¸‚: ${finalAddress}
åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼: ${account}
å•†å“: æ‰‹å·¥è¾£æ¤’ 300g
å–®åƒ¹: NT$ ${PRICE}
æ•¸é‡: ${qty} ç½
å°è¨ˆ: NT$ ${subtotal}
é‹è²»: ${shipping===0?'å…é‹è²» âœ“':'NT$ '+shipping}
ç¸½é¡: NT$ ${total}
å‚™è¨»: ${note}
âš ï¸ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©
âš ï¸ å†·è—å‡ºè²¨`;await fetch('https://api.web3forms.com/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,subject:`ğŸ›’ æ–°è¨‚å–® ${orderId} - æ‰‹å·¥è¾£æ¤’`,from_name:'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',email:MERCHANT_EMAIL,message:merchantEmailContent})});const customerEmailContent=`è¦ªæ„›çš„ ${customerName} æ‚¨å¥½:

æ„Ÿè¬æ‚¨è¨‚è³¼æ‰‹å·¥è¾£æ¤’ï¼

è¨‚å–®ç·¨è™Ÿ: ${orderId}
å•†å“: æ‰‹å·¥è¾£æ¤’ (300g) x ${qty} ç½
å°è¨ˆ: NT$ ${subtotal}
é‹è²»: ${shipping===0?'å…é‹è²» âœ“':'NT$ '+shipping}
ç¸½è¨ˆ: NT$ ${total}
å–è²¨æ–¹å¼: ${pickupMethod}
åœ°å€/é–€å¸‚: ${finalAddress}

âš ï¸ é‡è¦æé†’
â€¢ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©
â€¢ å†·è—å‡ºè²¨ï¼Œæ”¶åˆ°å¾Œè«‹å†·è—ä¿å­˜
ğŸ“Œ è«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿæ ¸å°å¾Œäº”ç¢¼
å®˜æ–¹å¸³è™Ÿ: @628puagn`;await fetch('https://api.web3forms.com/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,from_name:'æ‰‹å·¥è¾£æ¤’è¨‚è³¼ç³»çµ±',email:customerEmail,message:customerEmailContent})});messageDiv.innerHTML=`<div class="success-message">âœ… è¨‚å–®å·²æˆåŠŸé€å‡º!<br><br><strong>è¨‚å–®ç·¨è™Ÿ: ${orderId}</strong><br><br>ğŸ“Œ è«‹ç§è¨Šå®˜æ–¹å¸³è™Ÿæ ¸å°å¾Œäº”ç¢¼<br>å®˜æ–¹å¸³è™Ÿ: <strong>@628puagn</strong><br><br>âš ï¸ è£½ä½œå¤©æ•¸ç´„ 7-10 å¤©<br>ğŸ“§ ç¢ºèªä¿¡å·²ç™¼é€è‡³æ‚¨çš„ Email</div>`;document.getElementById('orderForm').reset();qtyInput.value=1;selectedStore='';storeSelectGroup.style.display='none';addressGroup.style.display='none';updatePrice();}catch(err){messageDiv.innerHTML='<div class="error-message">âŒ è¨‚å–®é€å‡ºå¤±æ•—<br><br>è«‹é€éå®˜æ–¹å¸³è™Ÿè¯ç¹«ï¼š<strong>@628puagn</strong></div>';}finally{submitBtn.disabled=false;submitBtn.textContent='ç¢ºèªè¨‚è³¼';}});

updatePrice();
</script>
</body>
</html>
